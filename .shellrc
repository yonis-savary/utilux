#!/bin/sh

UTILUX_PATH="$HOME/utilux"
export UTILUX_PATH

UTILUX_SCRIPT="$UTILUX_PATH/.shellrc"
UTILUX_BIN_PATH="$UTILUX_PATH/bin"
UTILUX_CONFIG_PATH="$HOME/.config/utilux"
PATH="$PATH:$UTILUX_BIN_PATH"

export UTILUX_PATH
export UTILUX_BIN_PATH
export UTILUX_CONFIG_PATH
export PATH

[ -d "$UTILUX_CONFIG_PATH" ] || mkdir -p "$UTILUX_CONFIG_PATH"
[ -d "$UTILUX_BIN_PATH" ] || mkdir "$UTILUX_BIN_PATH"


# Custom prompt
if [ ! -z "$PS1" ]
then
    PS1='\[\e[92;1m\]\W\[\e[0m\]\$'
fi

# Load setup custom shellrc file
if [ -f "$UTILUX_PATH/.shellrc.custom" ]
then
    . "$UTILUX_PATH/.shellrc.custom"
else
    cp "$UTILUX_PATH/.shellrc.custom.example" "$UTILUX_PATH/.shellrc.custom"
fi

alias utilux-config="nano $UTILUX_PATH/.shellrc.custom"

MODULES_PATH="$UTILUX_PATH/modules"
for file in "$MODULES_PATH"/*; do
    [ -d "$file" ] || continue
    shellrc_file="$file/.shellrc"
    if [ -f "$shellrc_file" ]; then
        source "$shellrc_file" "$file"
    fi
done
